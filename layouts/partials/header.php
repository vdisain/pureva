<?php 
/*
<header class="header">
        <div class="container flex">
            <picture>
                <source srcset="/images/pureva-logo.png" type="image/png">
                <source srcset="/images/pureva-logo.webp" type="image/webp">
                <img src="/images/pureva-logo.webp" alt="">
            </picture>
            <input type="text" name="search" placeholder="Otsi toodet" class="form__control--search">
            <a href="/" class="btn--link mr-20">
                <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 8.90332C10.21 8.90332 12 7.11332 12 4.90332C12 2.69332 10.21 0.90332 8 0.90332C5.79 0.90332 4 2.69332 4 4.90332C4 7.11332 5.79 8.90332 8 8.90332ZM8 10.9033C5.33 10.9033 0 12.2433 0 14.9033V15.9033C0 16.4533 0.45 16.9033 1 16.9033H15C15.55 16.9033 16 16.4533 16 15.9033V14.9033C16 12.2433 10.67 10.9033 8 10.9033Z" fill="white"/>
                </svg>
                Logi sisse
            </a>
            <a href="/" class="btn--link">
                <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.5 16.9033C5.4 16.9033 4.51 17.8033 4.51 18.9033C4.51 20.0033 5.4 20.9033 6.5 20.9033C7.6 20.9033 8.5 20.0033 8.5 18.9033C8.5 17.8033 7.6 16.9033 6.5 16.9033ZM0.5 1.90332C0.5 2.45332 0.95 2.90332 1.5 2.90332H2.5L6.1 10.4933L4.75 12.9333C4.02 14.2733 4.98 15.9033 6.5 15.9033H17.5C18.05 15.9033 18.5 15.4533 18.5 14.9033C18.5 14.3533 18.05 13.9033 17.5 13.9033H6.5L7.6 11.9033H15.05C15.8 11.9033 16.46 11.4933 16.8 10.8733L20.38 4.38332C20.75 3.72332 20.27 2.90332 19.51 2.90332H4.71L4.04 1.47332C3.88 1.12332 3.52 0.90332 3.14 0.90332H1.5C0.95 0.90332 0.5 1.35332 0.5 1.90332ZM16.5 16.9033C15.4 16.9033 14.51 17.8033 14.51 18.9033C14.51 20.0033 15.4 20.9033 16.5 20.9033C17.6 20.9033 18.5 20.0033 18.5 18.9033C18.5 17.8033 17.6 16.9033 16.5 16.9033Z" fill="white"/>
                </svg>
                Ostukorv
            </a>

        </div>
        <div class="container flex mt-20">
            <a href="/" class="btn--link mr--48">
            <svg width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12.1675H17C17.55 12.1675 18 11.7175 18 11.1675C18 10.6175 17.55 10.1675 17 10.1675H1C0.45 10.1675 0 10.6175 0 11.1675C0 11.7175 0.45 12.1675 1 12.1675ZM1 7.16748H17C17.55 7.16748 18 6.71748 18 6.16748C18 5.61748 17.55 5.16748 17 5.16748H1C0.45 5.16748 0 5.61748 0 6.16748C0 6.71748 0.45 7.16748 1 7.16748ZM0 1.16748C0 1.71748 0.45 2.16748 1 2.16748H17C17.55 2.16748 18 1.71748 18 1.16748C18 0.61748 17.55 0.16748 17 0.16748H1C0.45 0.16748 0 0.61748 0 1.16748Z" fill="white"/>
            </svg>
                Kõik tooted
            </a>

            <nav class="menu--main">
                <ul>
                    <li>
                        <a href="/" class="menu__item">Kaubamärgid</a>
                    </li>
                    <li>
                        <a href="/" class="menu__item">Tootekategooriad</a>
                    </li>
                    <li>
                        <a href="/" class="menu__item">Soodustooted</a>
                    </li>
                    <li>
                        <a href="/" class="menu__item">Uudistooted</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    */ ?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pureva</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="js/functions.js"></script>
</head>

<body>
    <header class="header position-relative">
        <div class="container">
            <div class="header__logo">
                <a href="./">
                    <img src="/images/site-logo.svg" alt="pureva_logo">
                </a>
            </div>

            <form action="/" method="get" class="header__search">
                <input type="text" name="search" placeholder="Otsi toodet..." class="form__control--search" aria-label="Otsi toodet">
                <button type="submit" class="btn btn--link" aria-label="Otsi">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.5101 10.182H10.8127L10.5655 9.94365C11.6249 8.70773 12.1722 7.02159 11.872 5.22952C11.4571 2.77535 9.40905 0.815545 6.93722 0.515395C3.203 0.0563418 0.060248 3.19909 0.519301 6.93331C0.819452 9.40514 2.77926 11.4532 5.23343 11.8681C7.0255 12.1683 8.71164 11.621 9.94755 10.5616L10.1859 10.8088V11.5062L13.9378 15.2581C14.2997 15.62 14.8912 15.62 15.2531 15.2581C15.6151 14.8961 15.6151 14.3047 15.2531 13.9427L11.5101 10.182ZM6.21333 10.182C4.01517 10.182 2.24075 8.40758 2.24075 6.20942C2.24075 4.01126 4.01517 2.23685 6.21333 2.23685C8.41149 2.23685 10.1859 4.01126 10.1859 6.20942C10.1859 8.40758 8.41149 10.182 6.21333 10.182Z" fill="#121A23"/>
                    </svg>
                </button>
            </form>

            <div class="language__dropdown dropdown">
                <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    EST
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">EST</a></li>
                    <li><a class="dropdown-item" href="#">ENG</a></li>
                    <li><a class="dropdown-item" href="#">FIN</a></li>
                    <li><a class="dropdown-item" href="#">RUS</a></li>
                </ul>
            </div>

            <div class="header__cta">
                <div class="dropdown d-flex">
                <!--- Logged out view--->
                    <!-- <a href="/" class="btn--link mr-20">
                        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 8.90332C10.21 8.90332 12 7.11332 12 4.90332C12 2.69332 10.21 0.90332 8 0.90332C5.79 0.90332 4 2.69332 4 4.90332C4 7.11332 5.79 8.90332 8 8.90332ZM8 10.9033C5.33 10.9033 0 12.2433 0 14.9033V15.9033C0 16.4533 0.45 16.9033 1 16.9033H15C15.55 16.9033 16 16.4533 16 15.9033V14.9033C16 12.2433 10.67 10.9033 8 10.9033Z" fill="white"/>
                        </svg>
                        <span class="d-none d-lg-inline">Logi sisse</span>
                    </a> -->
                <!---------------->

                 <!--- Logged in view--->
                    <a href="#" class="btn--link mr-20 dropdown-toggle" role="button" id="accountDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 8.90332C10.21 8.90332 12 7.11332 12 4.90332C12 2.69332 10.21 0.90332 8 0.90332C5.79 0.90332 4 2.69332 4 4.90332C4 7.11332 5.79 8.90332 8 8.90332ZM8 10.9033C5.33 10.9033 0 12.2433 0 14.9033V15.9033C0 16.4533 0.45 16.9033 1 16.9033H15C15.55 16.9033 16 16.4533 16 15.9033V14.9033C16 12.2433 10.67 10.9033 8 10.9033Z" fill="white"/>
                        </svg>
                        <span class="d-none d-lg-inline">Kasutaja</span>
                    </a>
                        <ul class="dropdown-menu" aria-labelledby="accountDropdown">
                            <li>
                                <p class="dropdown-item fw-500 fst-italic m-0">Tere, <span>Kasutaja</span></p>
                            </li>
                            <li class="border-top border-grey">
                                <a class="dropdown-item" href="#">Minu lemmikud</a>
                            </li>
                            <li class="border-top border-grey">
                                <a class="dropdown-item" href="#">Muuda parooli</a>
                            </li>
                            <li class="border-top border-grey">
                                <a class="dropdown-item" href="#">Logi välja</a>
                            </li>
                        </ul>
                    <!---------------->
                </div>    
                <a href="/" class="btn--link">
                    <span class="position-relative">
                        <svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.5 16.9033C5.4 16.9033 4.51 17.8033 4.51 18.9033C4.51 20.0033 5.4 20.9033 6.5 20.9033C7.6 20.9033 8.5 20.0033 8.5 18.9033C8.5 17.8033 7.6 16.9033 6.5 16.9033ZM0.5 1.90332C0.5 2.45332 0.95 2.90332 1.5 2.90332H2.5L6.1 10.4933L4.75 12.9333C4.02 14.2733 4.98 15.9033 6.5 15.9033H17.5C18.05 15.9033 18.5 15.4533 18.5 14.9033C18.5 14.3533 18.05 13.9033 17.5 13.9033H6.5L7.6 11.9033H15.05C15.8 11.9033 16.46 11.4933 16.8 10.8733L20.38 4.38332C20.75 3.72332 20.27 2.90332 19.51 2.90332H4.71L4.04 1.47332C3.88 1.12332 3.52 0.90332 3.14 0.90332H1.5C0.95 0.90332 0.5 1.35332 0.5 1.90332ZM16.5 16.9033C15.4 16.9033 14.51 17.8033 14.51 18.9033C14.51 20.0033 15.4 20.9033 16.5 20.9033C17.6 20.9033 18.5 20.0033 18.5 18.9033C18.5 17.8033 17.6 16.9033 16.5 16.9033Z" fill="white"/>
                        </svg>
                         <!--- Cart items--->
                        <span class="position-absolute rounded-circle cart-items">
                            <span class="">1</span>
                        </span>
                         <!----------------->
                    </span>
                    
                    <span class="d-none d-md-inline">Ostukorv</span>
                </a>
            </div>
            <nav class="navbar navbar-expand-xl">
                <button class="navbar-toggler collapsed" type="button" role="button" data-bs-toggle="collapse" data-bs-target="#navigation" data-lock-scroll>
                    <svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                    </svg>
                </button>
                <div class="overlay" data-dismiss-all></div>

<?php

$menu = [
    [
        'name' => 'Aiatööriistad',
        'submenu' => [
            ['name' => 'Aiakäärid', 'count' => 6],
            ['name' => 'Aiatarbed', 'count' => 29],
            ['name' => 'Anumad', 'count' => 8],
            ['name' => 'Kanistrid, kannud, lehtrid', 'count' => 25],
            ['name' => 'Kastekannud', 'count' => 6],
            ['name' => 'Kastmistarvikud', 'count' => 30],
            ['name' => 'Kummirattad', 'count' => 26],
            ['name' => 'Köied, nöörid', 'count' => 19],
            ['name' => 'Lumelabidad', 'count' => 3],
            ['name' => 'Pritspudelid, -püstolid', 'count' => 4],
            ['name' => 'Trimmerjõhvid', 'count' => 10],
        ]
    ],
    [
        'name' => 'Autokaubad',
        'submenu' => [
            ['name' => 'Aiakäärid', 'count' => 6],
            ['name' => 'Aiatarbed', 'count' => 29],
            ['name' => 'Anumad', 'count' => 8],
            ['name' => 'Kanistrid, kannud, lehtrid', 'count' => 25],
            ['name' => 'Kastekannud', 'count' => 6],
            ['name' => 'Kastmistarvikud', 'count' => 30],
            ['name' => 'Kummirattad', 'count' => 26],
            ['name' => 'Köied, nöörid', 'count' => 19],
            ['name' => 'Lumelabidad', 'count' => 3],
            ['name' => 'Pritspudelid, -püstolid', 'count' => 4],
            ['name' => 'Trimmerjõhvid', 'count' => 10],
        ]
    ],
    [
        'name' => 'Ehituskeemia',
        'submenu' => [
            ['name' => 'Aiakäärid', 'count' => 6],
            ['name' => 'Aiatarbed', 'count' => 29],
            ['name' => 'Anumad', 'count' => 8],
            ['name' => 'Kanistrid, kannud, lehtrid', 'count' => 25],
            ['name' => 'Kastekannud', 'count' => 6],
            ['name' => 'Kastmistarvikud', 'count' => 30],
            ['name' => 'Kummirattad', 'count' => 26],
            ['name' => 'Köied, nöörid', 'count' => 19],
            ['name' => 'Lumelabidad', 'count' => 3],
            ['name' => 'Pritspudelid, -püstolid', 'count' => 4],
            ['name' => 'Trimmerjõhvid', 'count' => 10],
        ]
    ],
    ['name' => 'Elektritarvikud'],
    ['name' => 'Elektritööriistade tarvikud'],
];

function navItem(array $item, ?int $level = 0) 
{
    $submenuId = !empty($item['submenu']) ? 'submenu__' . strtolower(str_replace(' ', '-', $item['name'])) : null;
?>

<li class="nav-item">
    <a 
        href="<?= !empty($submenuId) ? '#' . $submenuId : '/' ?>" 
        class="nav-link"
        <?php if (!empty($submenuId)): ?>
            data-bs-toggle="collapse" 
            data-bs-target="<?= '#' . $submenuId ?>" 
            aria-controls="<?= $submenuId ?>" 
            aria-expanded="false" 
        <?php endif ?>
    >
        <?= $item['name'] ?>

        <?php if (!empty($item['count'])): ?>
            <span>(<?= $item['count'] ?>)</span>
        <?php endif ?>

        <?php if (!empty($submenuId)): ?>
            <img src="/images/arrow-right.svg" alt="" width="8" height="13" class="d-sm-none" />
        <?php endif ?>
    </a>
    <?php if (!empty($submenuId)): ?>
        <div id="<?= $submenuId ?>" class="submenu__wrapper submenu--level-<?= $level ?> collapse">
            <button type="button" role="button" class="submenu__title" data-dismiss-submenu>
                <img src="/images/arrow-left.svg" alt="" width="8" height="13" />
                <?= $item['name'] ?>
            </button>

            <div class="submenu__heading">
                <button class="submenu-heading__close" data-dismiss-submenu>
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.3007 0.709971C12.9107 0.319971 12.2807 0.319971 11.8907 0.709971L7.0007 5.58997L2.1107 0.699971C1.7207 0.309971 1.0907 0.309971 0.700703 0.699971C0.310703 1.08997 0.310703 1.71997 0.700703 2.10997L5.5907 6.99997L0.700703 11.89C0.310703 12.28 0.310703 12.91 0.700703 13.3C1.0907 13.69 1.7207 13.69 2.1107 13.3L7.0007 8.40997L11.8907 13.3C12.2807 13.69 12.9107 13.69 13.3007 13.3C13.6907 12.91 13.6907 12.28 13.3007 11.89L8.4107 6.99997L13.3007 2.10997C13.6807 1.72997 13.6807 1.08997 13.3007 0.709971Z" fill="#121A23"/>
                    </svg>
                </button>
                <div class="submenu-heading__image">
                    <img src="/images/aiakäärid.png" class="img-fluid" alt="">
                </div>
                <h3 class="submenu-heading__title"><?= $item['name'] ?></h3>
                <div class="submenu-heading__description">
                    <p>Tasuta transport alates 100€ ostust 14-päevane tagastusõigus</p>
                </div>
                <div class="submenu-heading__cta">
                    <a href="#" class="btn btn-primary ">Vaata lähemalt</a>
                </div>
            </div>

            <ul class="submenu">
                <?php foreach ($item['submenu'] as $child): ?>
                    <?php navItem($child, $level + 1) ?>
                <?php endforeach ?>
            </ul>
        </div>
    <?php endif ?>
</li>

<?php } ?>

                <div class="collapse navbar-collapse" id="navigation">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a 
                                href="#submenu__kõik-tooted" 
                                class="nav-link nav-link--toggler font-semibold collapsed" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#submenu__kõik-tooted" 
                                aria-controls="submenu__kõik-tooted" 
                                aria-expanded="false" 
                                data-lock-scroll
                            >
                                <svg class="d-none d-xl-block mr-xl-2" width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4727 12H0.472656V9H22.4727V12Z" fill="white"></path>
                                </svg>
                                Kõik tooted
                                <img class="d-lg-none" src="/images/arrow-right.svg" alt="" width="8" height="13" />
                            </a>
                            <div class="overlay" data-dismiss-all></div>
                            <div id="submenu__kõik-tooted" class="submenu__wrapper submenu--level-1 collapse" data-categories-collapse>
                                <button type="button" role="button" class="submenu__title" data-dismiss-submenu>
                                    <img src="/images/arrow-left.svg" alt="" width="8" height="13" />
                                    Kõik tooted
                                </button>
                                <ul class="submenu">
                                    <?php foreach ($menu as $item): ?>
                                        <?php navItem($item, 2) ?>
                                    <?php endforeach ?>
                                </ul>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a href="/kaubamärgid.php" class="nav-link">Kaubamärgid</a>
                        </li>
                        <li class="nav-item">
                            <a href="/tootekategooriad.php" class="nav-link">Tootekategooriad</a>
                        </li>
                        <li class="nav-item">
                            <a href="/soodustooted.php" class="nav-link">Soodustooted</a>
                        </li>
                        <li class="nav-item">
                            <a href="/uudistooted.php" class="nav-link">Uudistooted</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>
    <span class="menu-overlay"></span>
    
    <?php include 'layouts/partials/banner.php' ?> 

    <?php include 'layouts/partials/cookies.php' ?> 

